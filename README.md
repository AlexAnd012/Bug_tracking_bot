# Log Alert Bot

–ë–æ—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ª–æ–≥–æ–≤ –Ω–∞ Go. –ß–∏—Ç–∞–µ—Ç `logs.log`, –æ—Ç–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º –∏–∑ `config.yaml`, –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ —á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ –≤ Telegram –∏–ª–∏ –≤—ã–≤–æ–¥–∏—Ç –≤ –∫–æ–Ω—Å–æ–ª—å.

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –±–æ—Ç—É: 
1. –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é –æ—Ç–∫—Ä—ã—Ç—ã—Ö –æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. 

2. –°–ø–æ—Å–æ–±–µ–Ω –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –∏–∑ —Ñ–∞–π–ª–∞ logs.log.

3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ.

4. –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ —Å–±–æ–µ–≤, –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç —Ñ–∞–ª—å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–ª–∏ –∏—Å–∫–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- —á—Ç–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞ `logs.log`
- —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º –∏–∑ `config.yaml`
- –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—è–º –ª–æ–≥–æ–≤ (`DEBUG`, `INFO`, `ERROR`) 
- –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ª–æ–≥–æ–≤  
- –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:  
  - –≤ Telegram
  - –≤ `stdout` (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)  
- hot reload `config.yaml` –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  
- —á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π  
 
---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
Bug_tracking_bot/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ main.go
‚îÇ
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.go
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ log_processing/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ filter_from_config/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ matcher.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ matcher_test.go
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ parser/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ parser.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ parser_test.go
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ protect_from_duplicates/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ formatter.go
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types.go
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ reader/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reader.go
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ sender/
‚îÇ       ‚îú‚îÄ‚îÄ sender.go
‚îÇ       ‚îú‚îÄ‚îÄ stdout.go
‚îÇ       ‚îî‚îÄ‚îÄ telegram.go
‚îÇ
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ config.example.yaml
‚îú‚îÄ‚îÄ config.yaml
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ logs.log
‚îú‚îÄ‚îÄ Makefile
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ task.go
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü–∞–π–ø–ª–∞–π–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–æ–≤:

```text
logs.log -> reader -> parser -> matcher -> deduplicator -> formatter -> sender
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **reader** - —á–∏—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ —Ñ–∞–π–ª–∞
- **parser** - —Ä–∞–∑–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –ª–æ–≥–∞ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `LogEntry`
- **matcher** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —É—Ä–æ–≤–Ω—é –∏ regex –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- **deduplicator** - –Ω–µ –¥–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ª–æ–≥ –ø–æ–≤—Ç–æ—Ä–Ω–æ
- **formatter** - –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –ª–æ–≥ –≤ —á–∏—Ç–∞–µ–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- **sender** - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Telegram –∏–ª–∏ –≤ –∫–æ–Ω—Å–æ–ª—å

---

## –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤

–û–∂–∏–¥–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ —Ç–∞–∫–æ–≥–æ –≤–∏–¥–∞:

```text
2026-02-25T17:24:25+03:00 [DEBUG] Invalid input received
```

–ü–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤—ã–¥–µ–ª—è—é—Ç—Å—è –ø–æ–ª—è:

- `Timestamp`
- `Level`
- `Message`
- `Raw`

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `config.example.yaml`.

### –ü—Ä–∏–º–µ—Ä `config.yaml`

```yaml
log_file: "../logs.log"
poll_interval_ms: 500

sender:
  type: "telegram" # stdout | telegram

telegram:
  bot_token: "token"
  chat_id: "chatId"

filters:
  # –ø—É—Å—Ç–æ = –≤—Å–µ —É—Ä–æ–≤–Ω–∏
  levels: []
  # —Ç–æ–ª—å–∫–æ —ç—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
  alert_regex:
    - "^Error processing request$"
    - "^Invalid input received$"

format:
  include_raw: true
  include_fingerprint: true
```

### –ü–æ—è—Å–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

- `log_file` - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–æ–≤
- `poll_interval_ms` - –∫–∞–∫ —á–∞—Å—Ç–æ –±–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–∞–π–ª –Ω–∞ –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏
- `sender.type` - –∫–∞–Ω–∞–ª –æ—Ç–ø—Ä–∞–≤–∫–∏ (`stdout` –∏–ª–∏ `telegram`)
- `telegram.bot_token` - —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞
- `telegram.chat_id` - ID —á–∞—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
- `filters.levels` - —Å–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —É—Ä–æ–≤–Ω–µ–π; –µ—Å–ª–∏ –ø—É—Å—Ç–æ, —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –≤—Å–µ
- `filters.alert_regex` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ regex –¥–ª—è –æ—Ç–±–æ—Ä–∞ –ª–æ–≥–æ–≤
- `format.include_raw` - –¥–æ–±–∞–≤–ª—è—Ç—å –ª–∏ –∏—Å—Ö–æ–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –ª–æ–≥–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `format.include_fingerprint` - –¥–æ–±–∞–≤–ª—è—Ç—å –ª–∏ –∫–æ—Ä–æ—Ç–∫–∏–π fingerprint

---

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –ª–æ–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ:

1. –ø—Ä–æ—Ö–æ–¥—è—Ç —Ñ–∏–ª—å—Ç—Ä –ø–æ —É—Ä–æ–≤–Ω—é `filters.levels` 
2. —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç regex –∏–∑ `filters.alert_regex`

–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.

### –ü—Ä–∏–º–µ—Ä

–ï—Å–ª–∏ –≤ –∫–æ–Ω—Ñ–∏–≥–µ —É–∫–∞–∑–∞–Ω–æ:

```yaml
filters:
  levels: ["ERROR"]
  alert_regex:
    - "^Error processing request$"
    - "^Invalid input received$"
```

–¢–æ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏ –≤–∏–¥–∞:

```text
2026-02-25T17:24:25+03:00 [ERROR] Error processing request
2026-02-25T17:24:26+03:00 [ERROR] Invalid input received
```

---

## Hot reload –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ë–æ—Ç —É–º–µ–µ—Ç –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞—Ç—å `config.yaml` –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞.

–ï—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∏–∑–º–µ–Ω–∏—Ç—å:

- `filters.alert_regex`
- `filters.levels`
- `format`
- `sender.type`
- –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Telegram

—Ç–æ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è.

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤ –∫–æ–Ω—Ñ–∏–≥–µ

–ï—Å–ª–∏ –Ω–æ–≤—ã–π `config.yaml` —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫—É:

- –±–æ—Ç –Ω–µ –ø–∞–¥–∞–µ—Ç
- —Ç–µ–∫—É—â–∞—è —Ä–∞–±–æ—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
- –æ—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É—Å—Ç–æ–π—á–∏–≤—É—é —Ä–∞–±–æ—Ç—É –±–µ–∑ —Å–±–æ–µ–≤.

---

## –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π

–ß—Ç–æ–±—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ª–æ–≥ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è.

–î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–æ—Ä–æ—Ç–∫–∏–π fingerprint –Ω–∞ –æ—Å–Ω–æ–≤–µ SHA-256. –ï—Å–ª–∏ —Ç–∞–∫–æ–π –ª–æ–≥ —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª—Å—è –Ω–µ–¥–∞–≤–Ω–æ, –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –≤—Ä–µ–º—è TTL.

–≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç:

- –Ω–µ –∑–∞—Å–æ—Ä—è—Ç—å —á–∞—Ç –¥—É–±–ª—è–º–∏
- –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞
- –Ω–µ –∏—Å–∫–∞–∂–∞—Ç—å –ø–æ—Ç–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

## –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π

### Telegram

–ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:

```text
üü° DEBUG 

–í—Ä–µ–º—è: 2026-02-25 19:05:37

–°–æ–æ–±—â–µ–Ω–∏–µ: Invalid input received

–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á: a4c823845a27

–ò—Å—Ö–æ–¥–Ω—ã–π –ª–æ–≥:
2026-02-25T19:05:37+03:00 [DEBUG] Invalid input received
```

### `stdout`

–ü—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–æ—Ç –∂–µ –ª–æ–≥ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–≤–µ–¥–µ–Ω –≤ –∫–æ–Ω—Å–æ–ª—å.

---

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone <your-repo-url>
cd Bug_tracking_bot
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
go mod tidy
```

### 3. –°–æ–∑–¥–∞—Ç—å `config.yaml`

–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω:

```bash
cp config.example.yaml config.yaml
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:

- `telegram.bot_token`
- `telegram.chat_id`

---

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

### –í–∞—Ä–∏–∞–Ω—Ç 1. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª—å

–í `config.yaml`:

```yaml
sender:
  type: "stdout"
```

–ó–∞–ø—É—Å–∫:

```bash
go run ./cmd
```

### –í–∞—Ä–∏–∞–Ω—Ç 2. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram

–í `config.yaml`:

```yaml
sender:
  type: "telegram"
```

–ó–∞–ø—É—Å–∫:

```bash
go run ./cmd
```

---

## Unit-—Ç–µ—Å—Ç—ã

–ü—Ä–æ–µ–∫—Ç –ø–æ–∫—Ä—ã—Ç –±–∞–∑–æ–≤—ã–º–∏ unit-—Ç–µ—Å—Ç–∞–º–∏ –¥–ª—è:

- –ø–∞—Ä—Å–∏–Ω–≥–∞ –ª–æ–≥–æ–≤
- matcher
- –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏

–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:

```bash
go test ./...
```

---

